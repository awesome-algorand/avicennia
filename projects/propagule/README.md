# ðŸŒ° Propagule

<a href="https://algokit.io"><img src="https://img.shields.io/badge/Built%20with-algokit-teal.svg"/></a>
[![GitHub license](https://img.shields.io/github/license/awesome-algorand/avicennia)]()

> [!CAUTION]
> This project is not intended for production use. Use at your own risk.

Extending on the work of Hashicorp's Vault PKI backend, this project aims to provide the following components for the Algorand Blockchain.

#### Terms:

- **PKI**: Public Key Infrastructure
- **CA**: Certificate Authority

#### Components:

- **Root CA**: Primary entity for the source of trust (codename Avicennia Germinans)
- **Intermediary CA**: Delegated trust by the **RootCA** (codename Propagule)
- **Validator CA**: Delegated trust by the **IntermediaryCA** (codename Validator)

### Why Propagule?
> A Propagule represent the Intermediary Certificate Authority (IAC).


This project is named after the Propagule, a bud of a plant that is capable of developing into a new individual.
These buds are often found in coastal areas and are capable of growing into a new plant.

### Why a Validator?
> A Validator represents the Intermediary Certificate Authority (IAC2)

A Validator is a trusted entity that issues digital certificate based on the Propagule Certificate Authority.
The validator is responsible for validating Certificate Signing Requests (CSR) and issuing digital certificates.


## ðŸŽ‰ Getting Started

> [!NOTE]
> This project is quite flakey and applies terraform twice due to the offline signing


Bootstrap all the project dependencies by running the following command:

```bash
./bootstrap.sh
```

Navigate to http://localhost:8200 to view the vault UI and Certificate Authority.



## TODO:

- [ ] Investigate the feasibility of a Hashicorp Vault plugin for the Propagule Certificate Authority
- [ ] Define REST/RPC interface for Validator (see [certbot](https://certbot.eff.org/) for inspiration)

## Current Bootstrap State:

- RootCA(Germinans) Generated by certstrap
  - ./certs/Germinans.crt (Certificate)
  - ./certs/Germinans.key (Ed25519 Private Key)
  - ./certs/Germinans.crl (Certificate Revocation List)
- IntermediateCA1(Propagule) CSR created and downloaded from Hashi Vault
  - ./csr/Propagule.csr (Certificate Signing Request)
- IntermediateCA1(Propagule) signed offline by RootCA(Germinans)
  - ./certs/Propagule.crt (Certificate)
  - ./cacerts/Propagule.crt (Certificate Chain)
- IntermediateCA2(Validator) CSR created online by Hashi Vault
- IntermediateCA2(Validator) signed online by IntermediateCA1(Propagule)
